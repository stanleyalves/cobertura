function getOptmizedImageUrl(e){return window.UA.isMobile()?e.replace("_b.jpg","_n.jpg"):e}function getMonthName(e){var e=parseInt(e),t="";return 1===e?t="JAN":2===e?t="FEV":3===e?t="MAR":4===e?t="ABR":5===e?t="MAI":6===e?t="JUN":7===e?t="JUL":8===e?t="AGO":9===e?t="SET":10===e?t="OUT":11===e?t="NOV":12===e&&(t="DEZ"),t}function getFormattedDate(e){var t=e.split(" ")[0].split("-",3);return t.shift(),t.reverse(),t[0]+" "+getMonthName(t[1])}function getFormattedHourAndMinutes(e){return e.split(" ")[1].split(":",2).join(":")}function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function extend(e,t){e=e||{};for(var n in t)e[n]="object"==typeof t[n]?this.extend(e[n],t[n]):t[n];return e}function RenderException(e){this.message=e,this.name="RenderException"}!function(e){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],e):"object"==typeof exports?e(require("jquery"),require("hammerjs")):e(jQuery,Hammer)}(function(e,t){function n(n,i){var o=e(n);o.data("hammer")||o.data("hammer",new t(o[0],i))}e.fn.hammer=function(e){return this.each(function(){n(this,e)})},t.Manager.prototype.emit=function(t){return function(n,i){t.call(this,n,i),e(this.element).trigger({type:n,gesture:i})}}(t.Manager.prototype.emit)}),$(document).ready(function(){$("[data-toggle]").click(function(){var e=$(this).data("toggle");$(e).toggleClass("open"),$(this).toggleClass("open")}),$("main > aside").hammer().on("swipe",function(){$(this).toggleClass("open"),$("[data-toggle]").toggleClass("open")})}),$(document).ready(function(){$(".choose-photos").magnificPopup({delegate:"a",type:"image",tLoading:"Carregando #%curr%...",mainClass:"mfp-img-mobile",tCounter:'<span class="mfp-counter">%curr% de %total%</span>',gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]}})}),$(document).ready(function(){Galleria.loadTheme("//cdnjs.cloudflare.com/ajax/libs/galleria/1.4.2/themes/classic/galleria.classic.min.js")}),function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.viewportUnitsBuggyfill=t()}(this,function(){"use strict";function e(e,t){var n;return function(){var i=this,o=arguments,r=function(){e.apply(i,o)};clearTimeout(n),n=setTimeout(r,t)}}function t(){try{return window.self!==window.top}catch(e){return!0}}function n(n){y||(n===!0&&(n={force:!0}),h=n||{},h.isMobileSafari=b,h.isBadStockAndroid=I,(h.force||b||B||I||O||h.hacks&&h.hacks.required(h))&&(h.hacks&&h.hacks.initialize(h),y=!0,v=document.createElement("style"),v.id="patched-viewport",document.head.appendChild(v),u(function(){var n=e(o,h.refreshDebounceWait||100);window.addEventListener("orientationchange",n,!0),window.addEventListener("pageshow",n,!0),(h.force||B||t())&&(window.addEventListener("resize",n,!0),h._listeningToResize=!0),h.hacks&&h.hacks.initializeEvents(h,o,n),o()})))}function i(){v.textContent=s()}function o(){y&&(r(),setTimeout(function(){i()},1))}function r(){return w=[],x.call(document.styleSheets,function(e){"patched-viewport"!==e.ownerNode.id&&e.cssRules&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(e.media&&e.media.mediaText&&window.matchMedia&&!window.matchMedia(e.media.mediaText).matches||x.call(e.cssRules,a))}),w}function a(e){if(7===e.type){var t;try{t=e.cssText}catch(n){return}return T.lastIndex=0,void(T.test(t)&&(w.push([e,null,t]),h.hacks&&h.hacks.findDeclarations(w,e,null,t)))}if(!e.style){if(!e.cssRules)return;return void x.call(e.cssRules,function(e){a(e)})}x.call(e.style,function(t){var n=e.style.getPropertyValue(t);T.lastIndex=0,T.test(n)&&(w.push([e,t,n]),h.hacks&&h.hacks.findDeclarations(w,e,t,n))})}function s(){g=d();var e,t,n=[],i=[];return w.forEach(function(o){var r=l.apply(null,o),a=r.selector.length?r.selector.join(" {\n")+" {\n":"",s=new Array(r.selector.length+1).join("\n}");return a&&a===e?(a&&!e&&(e=a,t=s),void i.push(r.content)):(i.length&&(n.push(e+i.join("\n")+t),i.length=0),void(a?(e=a,t=s,i.push(r.content)):(n.push(r.content),e=null,t=null)))}),i.length&&n.push(e+i.join("\n")+t),O&&n.push("* { content: normal !important; }"),n.join("\n\n")}function l(e,t,n){var i,o=[];i=n.replace(T,c),h.hacks&&(i=h.hacks.overwriteDeclaration(e,t,i)),t&&(o.push(e.selectorText),i=t+": "+i+";");for(var r=e.parentRule;r;)o.unshift("@media "+r.media.mediaText),r=r.parentRule;return{selector:o,content:i}}function c(e,t,n){var i=g[n],o=parseFloat(t)/100;return o*i+"px"}function d(){var e=window.innerHeight,t=window.innerWidth;return{vh:e,vw:t,vmax:Math.max(t,e),vmin:Math.min(t,e)}}function u(e){var t=0,n=function(){t--,t||e()};x.call(document.styleSheets,function(e){e.href&&f(e.href)!==f(location.href)&&(t++,m(e.ownerNode,n))}),t||e()}function f(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}function m(e,t){p(e.href,function(){var n=document.createElement("style");n.media=e.media,n.setAttribute("data-href",e.href),n.textContent=this.responseText,e.parentNode.replaceChild(n,e),t()},t)}function p(e,t,n){var i=new XMLHttpRequest;if("withCredentials"in i)i.open("GET",e,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");i=new XDomainRequest,i.open("GET",e)}return i.onload=t,i.onerror=n,i.send(),i}var h,g,w,v,y=!1,k=window.navigator.userAgent,T=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,x=[].forEach,B=!1,O=k.indexOf("Opera Mini")>-1,b=/(iPhone|iPod|iPad).+AppleWebKit/i.test(k)&&function(){var e=k.match(/OS (\d)/);return e&&e.length>1&&parseInt(e[1])<8}(),I=function(){var e=k.indexOf(" Android ")>-1;if(!e)return!1;var t=k.indexOf("Version/")>-1;if(!t)return!1;var n=parseFloat((k.match("Android ([0-9.]+)")||[])[1]);return 4.4>=n}();return B||(B=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.0",findProperties:r,getCss:s,init:n,refresh:o}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.viewportUnitsBuggyfillHacks=t()}(this,function(){"use strict";function e(e,t,o,r){var a="content"===o&&r.indexOf("viewport-units-buggyfill")>-1;if(a){var s=r.replace(i,"");s.split(";").forEach(function(i){var o=i.split(":");if(2===o.length){var r=o[0].trim();if("viewport-units-buggyfill"!==r){var a=o[1].trim();if(e.push([t,r,a]),n.test(a)){var s=a.replace(n,"-webkit-calc(");e.push([t,r,s])}}}})}}var t,n=/calc\(/g,i=/[\"\']/g,o=!1,r=!0,a=!0;return{required:function(e){return e.isMobileSafari||o},initialize:function(e){t=e;var n=document.createElement("div");n.style.width="1vmax",r=""!==n.style.width,(t.isMobileSafari||t.isBadStockAndroid)&&(a=!1)},initializeEvents:function(e,t,n){e.force||o&&!e._listeningToResize&&(window.addEventListener("resize",n,!0),e._listeningToResize=!0)},findDeclarations:function(t,n,i,o){null!==i&&e(t,n,i,o)},overwriteDeclaration:function(e,t,n){return o&&"filter"===t&&(n=n.replace(/px/g,"")),n}}}),function(window){"use strict";var showButtonNewContent=function(){$(window).scrollTop()>500&&$(".button-new-content").fadeIn().removeClass("is-hidden")},TimelineBlocks={};TimelineBlocks={timelineBlocks:null,render:function(data,newerContent){var newElement=eval("window.TimeLineBlock"+capitalize(data.type)+".render( data )");newerContent?($("#timeline").prepend(newElement),showButtonNewContent()):$(".timeline-block:last-child").after(newElement)},getTimelineBlocks:function(){return TimelineBlocks.timelineBlocks=$(".timeline-block"),TimelineBlocks.timelineBlocks},elementIsVisibleOnViewport:function(e,t){return e.offset().top<=$(window).scrollTop()+$(window).height()*t},elementIsNotVisibleOnViewport:function(e,t){return e.offset().top>$(window).scrollTop()+$(window).height()*t},hideBlocksOutsideViewport:function(e){var t,n=TimelineBlocks.getTimelineBlocks();n.each(function(){t=$(this),TimelineBlocks.elementIsNotVisibleOnViewport(t,e)&&t.find(".timeline-img, .timeline-content").addClass("is-hidden")})},showBlocksInViewport:function(e){var t,n=TimelineBlocks.getTimelineBlocks();n.each(function(){t=$(this),TimelineBlocks.elementIsVisibleOnViewport(t,e)&&t.find(".timeline-img").hasClass("is-hidden")&&t.find(".timeline-img, .timeline-content").removeClass("is-hidden").addClass("bounce-in")})}},"undefined"!=typeof define&&define.amd?define(function(){return TimelineBlocks}):"undefined"!=typeof module&&module.exports?(module.exports=TimelineBlocks.attach,module.exports.TimelineBlocks=TimelineBlocks):window.TimelineBlocks=TimelineBlocks}(window),function(e){"use strict";function t(){return-1===e.location.origin.indexOf("localhost")?"//burburinho.herokuapp.com":"//localhost:5000"}var n={OFFSET:.8,URL_BUFFER_INFO:t()+"/api/burburinhos",URL_SOCKET_IO:t(),URL_OLDEST_INFO:t()+"/api/burburinhos"};"undefined"!=typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?(module.exports=n.attach,module.exports.CONFIG=n):e.CONFIG=n}(window),function(e){"use strict";var t={render:function(e){throw new RenderException("Render method wasn't implemented!")}};"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.ITimeLineBlock=t):e.ITimeLineBlock=t}(window),function(e){"use strict";var t={};extend(t,e.ITimeLineBlock),t.render=function(e){var t=getFormattedDate(e.timestamp),n=getFormattedHourAndMinutes(e.timestamp),i=e.content.map(function(e){return'<img src="'+getOptmizedImageUrl(e.url)+'" alt="'+e.description+'"/>'});return'<div class="timeline-block"><figure class="timeline-img"><i class="fa fa-picture-o"></i></figure><time class="data-hora">'+t+'    <strong class="hora">'+n+'</strong></time><article class="timeline-content gallery"><h2 class="estado">'+e.local+'</h2><section class="photos">'+i.join("")+"</section></article></div>"},"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.TimeLineBlockGallery=t):e.TimeLineBlockGallery=t}(window),function(e){"use strict";var t={};extend(t,e.ITimeLineBlock),t.render=function(e){var t=getFormattedDate(e.timestamp),n=getFormattedHourAndMinutes(e.timestamp);return'<div class="timeline-block"><figure class="timeline-img"><i class="fa fa-camera-retro"></i></figure><time class="data-hora">'+t+'    <strong class="hora">'+n+'</strong></time><article class="timeline-content photo"><h2 class="estado">'+e.local+'</h2><img src="'+e.url+'" alt="manifestação"/><p>'+e.content+"</p></article></div>"},"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.TimeLineBlockPhoto=t):e.TimeLineBlockPhoto=t}(window),function(e){"use strict";var t={};extend(t,ITimeLineBlock),t.render=function(e){var t=getFormattedDate(e.timestamp),n=getFormattedHourAndMinutes(e.timestamp);return'<div class="timeline-block"><figure class="timeline-img">  <i class="fa fa-quote-left"></i></figure><time class="data-hora">'+t+'    <strong class="hora">'+n+'</strong></time><article class="timeline-content quote"><h2 class="estado">'+e.local+'</h2>  <img class="perfil" src="'+e.url+'" alt="foto perfil"/>  <p>'+e.content+"</p></article></div>"},"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.TimeLineBlockQuote=t):e.TimeLineBlockQuote=t}(window),function(e){"use strict";var t={};extend(t,e.ITimeLineBlock),t.render=function(e){var t=getFormattedDate(e.timestamp),n=getFormattedHourAndMinutes(e.timestamp);return'<div class="timeline-block">  <figure class="timeline-img">    <i class="fa fa-align-justify"></i>  </figure><time class="data-hora">'+t+'    <strong class="hora">'+n+'</strong></time><article class="timeline-content text"><h2 class="estado">'+e.local+"</h2>    <p>"+e.content+"</p>  </article></div>"},"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.TimeLineBlockText=t):e.TimeLineBlockText=t}(window),function(e){"use strict";var t={};extend(t,ITimeLineBlock),t.render=function(e){var t=getFormattedDate(e.timestamp),n=getFormattedHourAndMinutes(e.timestamp);return'<div class="timeline-block"><figure class="timeline-img"><i class="fa fa-video-camera fa-4"></i></figure><time class="data-hora">'+t+'    <strong class="hora">'+n+'</strong></time><article class="timeline-content video"><h2 class="estado">'+e.local+'</h2><iframe src="'+e.url+'"></iframe><p>'+e.content+"</p></article></div>"},"undefined"!=typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.TimeLineBlockVideo=t):e.TimeLineBlockVideo=t}(window),function(e){"use strict";function t(){o+=1;var e=[];if(n.length>0)for(var t=0;i>t;t++)e.push(n[t]),n.shift();return e}var n=[],i=10,o=0,r=e.CONFIG,a={};a={loadServerData:function(){a.getOldestInformations().then(function(e){n=e})},getLocalOldestInformations:function(){return t()},numberOfPages:function(){return Math.ceil(n.length/i)},getBufferInformations:function(){return $.getJSON(r.URL_BUFFER_INFO)},getOldestInformations:function(){return $.getJSON(r.URL_OLDEST_INFO)}},"undefined"!=typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.TimeLineStore=a):e.TimeLineStore=a}(window),$(document).ready(function(){function e(e){e&&(window.Galleria.run(".gallery section.photos:not(.gallery-on)"),$(".gallery section.photos:not(.gallery-on)").addClass("gallery-on"),e=!1)}function t(e){return"gallery"===e.type}function n(e){"photo"===e.type&&$(".choose-photos .photo:last-child").after('<a class="photo" href="'+getOptmizedImageUrl(e.url)+'"><img src="'+getOptmizedImageUrl(e.url)+'" alt="'+e.content+'" width="90" height="60"></a>')}function i(i,s,l){s="undefined"!=typeof s?s:!1;var c=!1;if(r.showBlocksInViewport(a.OFFSET),i||s){if(s)r.render(l,s),n(l),c=t(l);else{var d=o.getLocalOldestInformations();if(0===d.length)return;$.each(o.getLocalOldestInformations(),function(e,i){r.render(i,s),n(i),c||(c=t(i))})}e(!!c),r.hideBlocksOutsideViewport(a.OFFSET),$(window).trigger("scroll")}}$(".button-new-content").click(function(){return $("html, body").animate({scrollTop:$("main").offset().top},800),$(this).fadeOut().addClass("is-hidden"),!1});var o=window.TimeLineStore,r=window.TimelineBlocks,a=window.CONFIG;o.loadServerData(),o.getBufferInformations().then(function(e){e.length>0&&$.each(e,function(e,t){r.render(t,!0)})}),r.hideBlocksOutsideViewport(a.OFFSET);var s=io.connect(a.URL_SOCKET_IO);s.on("burburinho",function(e){var t=$(".timeline-block:last-child"),n=t.size()>0?r.elementIsVisibleOnViewport(t,a.OFFSET):!0;i(n,!0,e.message)});var l=function(){var e=$(".timeline-block:last-child"),t=e.size()>0?r.elementIsVisibleOnViewport(e,a.OFFSET):!0;i(t)};$(window).on("scroll",function(){l()}),l()});